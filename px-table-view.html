<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="px-table-view-behavior.html" />
<link rel="import" href="px-table-view-drilldown-behavior.html" />
<link rel="import" href="px-table-row.html" />

<!--
To style this component you can do the following:

```
:root {
  --table-view-border-color: red;
  --table-view-background-color: green;
}
```

To use this component with iron list you can do the following:
```
<div class="demo" style="height: 500px; overflow:auto;">
  <template id="tableViewTemplate" is="dom-bind">
    <iron-ajax url="./demo/data.json" last-response="{{data}}" auto></iron-ajax>
    <iron-list id="ironList" items="[[data]]" as="item" class="table-view  table-view--small">
      <template>
        <div class="table-row table-row--nav-right" on-click="handleSelect">
          <div class="table-row__media table-row__media--icon" hidden="{{!item.icon}}">
              <i class$="{{item.icon}}"></i>
          </div>
          <div class="table-row__media table-row__media--image" hidden="{{!item.image}}">
            <img src$="{{item.image}}" alt="{{item.title}}">
          </div>
          <div class="table-row__content">
            <span class="table-row__content__title">{{item.title}}</span>
          </div>
        </div>
      </template>
    </iron-list>
  </template>
  <script type="text/javascript">
    var tmpl = document.getElementById('tableViewTemplate');
    tmpl.handleSelect = function(e) {
      console.log('handleSelect', e);
    };
    document.addEventListener('WebComponentsReady', function() {
      setTimeout(function() {
        document.querySelector('iron-list').fire('iron-resize');
      }, 50);
    });
  </script>
</div>
```
@element px-table-view.html
@demo demo.html
@homepage index.html
-->

<dom-module id="px-table-view">
  <link rel="stylesheet" href="css/px-table-view.css" is="custom-style" />
  <template strip-whitespace>
    <style>
    :host {
      display: block;
      min-height: 20vh;
    }

    :host ul {
      margin: 0;
      padding: 0;
    }

    </style>
    <div class="table-view table-view--small">
      <template is="dom-if" if="{{items}}">
        <template is="dom-repeat" items="{{items}}">
          <px-table-row item="{{item}}" on-tap="handleSelect"></px-table-row>
        </template>
      </template>
      <content select="*"></content>
    </div>
  </template>
  <script>
  Polymer({
    is: 'px-table-view',
    behaviors: [
      px.behaviors.TableView,
      px.behaviors.TableViewDrilldownBehavior
    ],
    properties: {
      //The list items data
      items: {
        type: Array
      },
      //The mode for the table view.
      mode: {
        type: String
      },
      //To make the list items responsive
      responsive: {
        type: Boolean,
        value: false
      },
      sortable: {
        type: Boolean,
        value: false
      }
    }
  });

  </script>
</dom-module>
