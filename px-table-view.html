<script src="../fastclick/lib/fastclick.js"></script>

<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-list/iron-list.html">
<link rel="import" href="../iron-selector/iron-multi-selectable.html">

<link rel="import" href="px-table-view-behavior.html"/>
<link rel="import" href="px-table-view-drilldown-behavior.html" />

<link rel="import" href="px-table-row.html"/>
<link rel="import" href="px-table-row-checkbox.html"/>
<link rel="import" href="px-table-row-switch.html"/>
<!--

-->

<script type="text/javascript">
  if ('addEventListener' in document) {
    document.addEventListener('DOMContentLoaded', function () {
      FastClick.attach(document.body);
      console.warn('table-view', 'attaching fastclick!');
    }, false);
  }
</script>
<!--
<p>
  For demo visit <a href="demo.html" target="_blank">Full demo here</a> or <a href="mobile-demo.html" target="_blank">Mobile demo here</a>
</p>

## Usage

To style this component you can do the following:

```
:root {
  --table-view-border-color: red;
  --table-view-background-color: green;
}
```

To use this component with iron list you can do the following:
```
<div class="demo" style="height: 500px; overflow:auto;">
  <template id="tableViewTemplate" is="dom-bind">
    <iron-ajax url="./demo/data.json" last-response="{{data}}" auto></iron-ajax>
    <iron-list id="ironList" items="[[data]]" as="item" class="table-view  table-view--small">
      <template>
        <div class="table-row table-row--nav-right" on-click="handleSelect">
          <div class="table-row__media table-row__media--icon" hidden="{{!item.icon}}">
              <i class$="{{item.icon}}"></i>
          </div>
          <div class="table-row__media table-row__media--image" hidden="{{!item.image}}">
            <img src$="{{item.image}}" alt="{{item.title}}">
          </div>
          <div class="table-row__content">
            <span class="table-row__content__title">{{item.title}}</span>
          </div>
        </div>
      </template>
    </iron-list>
  </template>
  <script type="text/javascript">
    var tmpl = document.getElementById('tableViewTemplate');
    tmpl.handleSelect = function(e) {
      console.log('handleSelect', e);
    };
    document.addEventListener('WebComponentsReady', function() {
      setTimeout(function() {
        document.querySelector('iron-list').fire('iron-resize');
      }, 50);
    });
  </script>
</div>
```
@element px-table-view.html
@demo demo.html
@homepage index.html
-->

<dom-module id="px-table-view">
  <link rel="stylesheet" href="css/px-table-view.css" is="custom-style"/>
  <template strip-whitespace>
    <style>
      :host {

      }
      :host ul {
        margin: 0;
        padding: 0;
      }

    </style>
    <template id="ironList" is="dom-if" if="{{tableData}}">
      <template id="tableRowTemplate" items="{{tableData}}" is="dom-repeat">
        <px-table-row item="{{item}}"></px-table-row>
      </template>
      <!--
      <iron-list id="ironList" items="[[tableData]]" as="item">
        <template>
          <content select="px-table-row"></content>
        </template>
      </iron-list>
    -->
    </template>

    <content id="content" select="*"></content>

  </template>
  <script>
    Polymer({
      is: 'px-table-view',
      behaviors: [
        Polymer.IronMultiSelectableBehavior,
        pxTableViewBehavior,
        pxTableViewDrilldownBehavior
      ],
      properties: {
        //The list items data
        tableData: {
          type: Array
        },
        //The mode for the table view.
        mode: {
          type: String
        },
        //To make the list items responsive
        responsive: {
          type: Boolean,
          value: false
        },
        sortable: {
          type: Boolean,
          value: false
        }
      },
      attached: function(){
        var children = this.children;
        console.log('tableview children', children);

        console.log('Content children', this.getEffectiveChildren());
        console.log('Content children', this.$.content.children);
      }
    });
  </script>
</dom-module>
