<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="px-table-view-behavior.html" />
<link rel="import" href="px-table-row.html" />

<!--
```
<div class="demo" style="height: 500px; overflow:auto;">
  <template id="tableViewTemplate" is="dom-bind">
    <iron-ajax url="./demo/data.json" last-response="{{data}}" auto></iron-ajax>
    <iron-list id="ironList" items="[[data]]" as="item" class="table-view  table-view--small">
      <template>
        <div class="table-row table-row--nav-right" on-click="handleSelect">
          <div class="table-row__media table-row__media--icon" hidden="{{!item.icon}}">
              <i class$="{{item.icon}}"></i>
          </div>
          <div class="table-row__media table-row__media--image" hidden="{{!item.image}}">
            <img src$="{{item.image}}" alt="{{item.title}}">
          </div>
          <div class="table-row__content">
            <span class="table-row__content__title">{{item.title}}</span>
          </div>
        </div>
      </template>
    </iron-list>
  </template>
  <script type="text/javascript">
    var tmpl = document.getElementById('tableViewTemplate');
    tmpl.handleSelect = function(e) {
      console.log('handleSelect', e);
    };
    document.addEventListener('WebComponentsReady', function() {
      setTimeout(function() {
        document.querySelector('iron-list').fire('iron-resize');
      }, 50);
    });
  </script>
</div>
```
@element px-table-view.html
@blurb px-table-view
@demo demo.html
@homepage index.html
-->
<link rel="stylesheet" href="css/px-table-view.css" />
<dom-module id="px-table-view">

  <style>
    :host {
      display: block;
    }
  </style>
  <template>
    <ul class="table-view table-view--small">
      <template is="dom-if" if="{{items}}">
        <template is="dom-repeat" items="{{items}}">
          <li class="table-row table-row--tappable" on-click="handleSelect">
            <px-table-row item="{{item}}"></px-table-row>
          </li>
        </template>
      </template>
        <template is="dom-if" if="{{!items}}">
          <content select="*"></content>
        </template>

    </ul>
  </template>
  <script>
    Polymer({
      is: 'px-table-view',
      behaviors: [
        px.behaviors.TableView
      ],
      properties: {
        items: {
          type: Array
        },
        responsive: {
          type: Boolean,
          value: false
        }
      },
      created: function() {
       // console.log('Created', this.tagName);
       // console.dir(this);
      },
      attached: function() {
        if(this.responsive){
          this.toggleClass('table-view--responsive', this.responsive, this.$.list);
        }
      },
      handleSelect: function(e){
        console.log('select', e.model);
        this.fire('select', e.model);
      }
    });
  </script>
</dom-module>
