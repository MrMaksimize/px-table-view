<link rel="import" href="../polymer/polymer.html"/>
<!--
To use this component:

```
<li class="table-row">
  <px-table-row-checkbox name="cb0" label="No Border Checked" type="no-border" checked></px-table-row-checkbox>
</li>
```
@element px-table-row-checkbox.html
@demo demo/checkboxes.html
@homepage index.html
-->
<dom-module id="px-table-row-checkbox">
  <template>
  <style>
    :host {
      display: block;
      width: 100%;
    }
    :host.muted{
      pointer-events: none;
    }
  </style>
    <label class="table-row__checkbox needsclick" for$="{{name}}">
        <input id$="{{name}}" type="checkbox"
        name$="[[name]]"
        checked="{{checked::change}}"
        disabled="{{disabled}}"
        value$="[[value]]">
        <div class="table-row__checkbox__checkmark "></div>
        <span>{{label}}</span>
      </label>
  </template>
  <script>
    Polymer({
      is: 'px-table-row-checkbox',
      hostAttributes: {
        role: 'checkbox',
        checked: false,
        'aria-checked': false,
        tabindex: 0
      },
      properties: {
        //The input name for the checkbox
        name: {
          type: String
        },

        //The input value for the checkbox
        value: {
          type: String
        },
        //The type of checkbox (no-border)
        type: {
          type: String
        },
        //The checked state
        checked: {
          type: Boolean,
          notify: true,
          reflectToAttribute: true,
          value: false
        },
        //The disabled state
        disabled: {
          type: Boolean,
          value: false
        }
      },
      attached: function () {
        if (this.type) {
          this.toggleClass('table-row__checkbox--' + this.type, true, this.$$('label'));
        }
        if (this.disabled) {
          this.toggleClass('muted');
          this.$$('input').disabled = true;
        }
        this.listen(this.$$('label'), 'tap', 'handleTap');
      },
      handleTap: function (e) {
        //this.checked = !this.checked;
        if (this.disabled) {
          return;
        }
        // TODO: IOS and FastClick have an issue where the label does not trigger the event.
        var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        if (iOS) {
          //this.$$('input').checked = !this.$$('input').checked;
        }
      }
    });
  </script>
</dom-module>
