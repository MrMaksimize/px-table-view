<link rel="import" href="../polymer/polymer.html"/>


<link rel="import" href="px-table-row-actions.html">
<link rel="import" href="px-table-row-action-button.html">
<link rel="import" href="px-table-row-switch.html"/>
<link rel="import" href="px-table-row-checkbox.html"/>
<link rel="import" href="px-table-row-swipe-actions-behavior.html"/>

<!--
To use this element you can do the following:
```
<px-table-row title="Item Label"></px-table-row>
```

To style this component you can do the following:

```
:root {
  --table-row-border-color: red;
  --table-row-background-color: green;
}
```

@element px-table-row.html
@demo mobile-demo.html
@homepage index.html
-->
<dom-module id="px-table-row">
  	<style include="px-table-view-css"></style>
  <style>
    :host {
      display: block;
      position: relative;
      width: 100%;
    }

    :host .flex {
      position: relative;
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
    }

    :host .table-row__actions--underlay {
      position: absolute;
      right: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: row;
      flex-direction: row-reverse;
      margin: 0 1rem;
    }

    :host .swipe-content {
      width: 100%;
      transform-style: preserve-3d;
      backface-visibility: hidden;
    }


    :host .animate {
      -webkit-transition: -webkit-transform 0.4s cubic-bezier(.10, .70, .10, 1) 0.5s;
      transition: transform 0.4s cubic-bezier(.10, .70, .10, 1) 0.5s;
      will-change: translate;
    }

  </style>
  <template>
    <template is="dom-if" if="{{editMode}}">
      <button class="btn btn--bare table-row__delete-btn" on-click="_handleRemoveItem">
        <i class="fa fa-minus-circle fa-lg color-red"></i>
      </button>
    </template>

    <template is="dom-if" if="{{label2}}">
      <span class="table-row__label table-row__label--left">{{label2}}</span>
    </template>

    <template is="dom-if" if="{{image}}">
      <div class="table-row__media table-row__media--image">
        <img src$="{{image}}" alt="{{title}}">
      </div>
    </template>

    <template is="dom-if" if="{{icon}}">
      <div class="table-row__media table-row__media--icon">
        <i class$="{{icon}}"></i>
      </div>
    </template>
    <template is="dom-if" if="{{iconLeft}}">
      <div class="table-row__media table-row__media--icon table-row__media--left">
        <i class$="{{iconLeft}}"></i>
      </div>
    </template>
    <template is="dom-if" if="{{iconRight}}">
      <div class="table-row__media table-row__media--icon table-row__media--right">
        <i class$="{{iconRight}}"></i>
      </div>
    </template>

    <template is="dom-if" if="{{label1}}">
      <span class="table-row__label table-row__label--right u-mr">{{label1}}</span>
    </template>

    <template is="dom-if" if="{{orderMode}}">
      <button class="btn btn--bare table-row__reorder-btn" on-click="_handleReorderItem">
        <i class="fa fa-bars "></i>
      </button>
    </template>

    <div class="table-row__content">
      <template is="dom-if" if="{{title}}">
        <div class="table-row__title">{{title}}</div>
      </template>
      <template is="dom-if" if="{{subtitle}}">
        <div class="table-row__subtitle">{{subtitle}}</div>
      </template>

      <template is="dom-if" if="{{body}}">
        <div class="table-row__body ">{{body}}</div>
      </template>

      <content id="content" select=".table-row__content, px-table-row-switch, px-table-row-checkbox"></content>
    </div>


    <content id="actions" select="px-table-row-actions"></content>

  </template>
  <script>
    Polymer({
      is: 'px-table-row',
      behaviors: [pxTableRowActionsSwipeBehavior],
      properties: {
        //The table-row object.
        item: {
          type: Object,
          value: {}
        },
        //The title to set on the table-row.
        title: {
          type: String
        },
        //The sub title to set on the table-row.
        subtitle: {
          type: String
        },
        //The label to place on the right side of the item.
        label1: {
          type: String
        },
        //The label to place on the left side of the item.
        label2: {
          type: String
        },
        //The body to set on the table-row.
        body: {
          type: String
        },
        //The image to set on the table-row.
        image: {
          type: String
        },
        //The icon to set on the table-row.
        icon: {
          type: String
        },
        //The left icon to set on the table-row.
        iconLeft: {
          type: String
        },
        //The right icon to set on the table-row.
        iconRight: {
          type: String
        },
        //The size to set on the table-row.
        size: {
          type: String
        },
        //The media position (left or right);
        mediaPos: {
          type: String,
          value: 'left'
        },
        //The type of table-row (tappable, info, nav-right, chevron)
        type: {
          type: String
        },
        //If editMode is true then this item displays a delete icon.
        editMode: {
          type: Boolean
        },
        //If orderMode is true then this item displays a order icon.
        orderMode: {
          type: Boolean
        },
        //If actionable is true then this item responds to swipeleft/swiperight events.
        actionable: {
          type: Boolean
        }
      },
      attached: function () {
        this.toggleClass('table-row');
        if (this.type) {
          var types = this.type.split(' ');
          for (var i = 0; i < types.length; i++) {
            this.toggleClass('table-row--' + types[i]);
          }
        }
        if (this.size) {
          this.toggleClass('table-row--' + this.size);
        }
        if (this.actionable) {
          this.toggleClass('table-row--actionable');
        }
        if (this.mediaPos) {
          this.toggleClass('table-row__media--' + this.mediaPos, true, this.$$('.table-row__media'));
        }
        if (this.item) {
          var item = this.item;
          for (var prop in item) {
            this[prop] = item[prop];
          }
        }
      },
      _handleRemoveItem: function (e) {
        e.preventDefault();
        this.fire('remove', e);
        this.remove();
        return false;
      },
      _handleReorderItem: function (e) {
        e.preventDefault();
        this.fire('reorder', e);
        return false;
      }
    });
  </script>
</dom-module>
