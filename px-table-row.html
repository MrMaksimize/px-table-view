<link rel="import" href="../polymer/polymer.html"/>
<!--
<link rel="import" href="../paper-swipe/paper-swipe.html"/>
-->
<link rel="import" href="px-table-row-actions.html">
<link rel="import" href="px-table-row-action-button.html">
<link rel="import" href="px-table-row-switch.html"/>
<link rel="import" href="px-table-row-checkbox.html"/>
<link rel="import" href="px-table-row-swipe-actions-behavior.html"/>

<!--
To use this element you can do the following:
```
<px-table-row title="Item Label"></px-table-row>
```

To style this component you can do the following:

```
:root {
  --table-row-border-color: red;
  --table-row-background-color: green;
}
```

### Styling

Custom property | Description | Default
------------ | ------------- | ------------
`--px-table-row-line-height`       | The line height of the table row  | 44px
`--px-table-row-min-height`       | The min height of the table row  | 44px
`--px-table-row-font-size`       | The font size of the table row  | 16px
`--px-table-row-font-color`       | The font color of the table row  | black
`--px-table-row-background-color`       | The background color of the table row  | #fff
`--px-table-row-title-font-size`       | The font size of the table row title. | 17px
`--px-table-row-title-font-color`       | The font color of the table row title. | #000
`--px-table-row-subtitle-font-size`       | The font size of the table row subtitle. | 15px
`--px-table-row-subtitle-font-color`       | The font color of the table row subtitle. | #444





@element px-table-row.html
@demo mobile-demo.html
@homepage index.html
-->
<dom-module id="px-table-row">
  <link rel="import" type="css" href="css/px-table-view.css">
  <style>
    :host {
      display: block;
      position: relative;
      width: 100%;
    }

    :host .flex {
      position: relative;
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
    }

    :host .table-row__actions--underlay {
      position: absolute;
      right: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: row;
      flex-direction: row-reverse;
      margin: 0 1rem;
    }

    :host .swipe-content {
      width: 100%;
      transform-style: preserve-3d;
      backface-visibility: hidden;
    }

    :host .animate {
      -webkit-transition: -webkit-transform 0.4s cubic-bezier(.10, .70, .10, 1) 0.5s;
      transition: transform 0.4s cubic-bezier(.10, .70, .10, 1) 0.5s;
      will-change: translate;
    }

  </style>
  <template>
    <div class="table-row">

      <template is="dom-if" if="{{editMode}}">
        <button class="btn btn--bare table-row__delete-btn" on-click="_handleRemoveItem">
          <i class="fa fa-minus-circle fa-lg color-red"></i>
        </button>
      </template>

      <template is="dom-if" if="{{label2}}">
        <span class="table-row__label table-row__label--left">{{label2}}</span>
      </template>

      <template is="dom-if" if="{{image}}">
        <div class="table-row__media table-row__media--image">
          <img src$="{{image}}" alt="{{title}}">
        </div>
      </template>

      <template is="dom-if" if="{{icon}}">
        <div class="table-row__media table-row__media--icon">
          <i class$="{{icon}}"></i>
        </div>
      </template>
      <template is="dom-if" if="{{iconLeft}}">
        <div class="table-row__media table-row__media--icon table-row__media--left">
          <i class$="{{iconLeft}}"></i>
        </div>
      </template>
      <template is="dom-if" if="{{iconRight}}">
        <div class="table-row__media table-row__media--icon table-row__media--right">
          <i class$="{{iconRight}}"></i>
        </div>
      </template>

      <template is="dom-if" if="{{label1}}">
        <span class="table-row__label table-row__label--right">{{label1}}</span>
      </template>

      <template is="dom-if" if="{{orderMode}}">
        <button class="btn btn--bare table-row__reorder-btn" on-click="_handleReorderItem">
          <i class="fa fa-bars "></i>
        </button>
      </template>

      <div class="table-row__content">
        <template is="dom-if" if="{{title}}">
          <div class="table-row__title">{{title}}</div>
        </template>
        <template is="dom-if" if="{{subtitle}}">
          <div class="table-row__subtitle">{{subtitle}}</div>
        </template>
        <template is="dom-if" if="{{body}}">
          <div class="table-row__body">{{body}}</div>
        </template>
        <content id="content" select="[content], px-table-row-switch, px-table-row-checkbox"></content>
      </div>
      <content id="swiper" select="px-swipe"></content>
      <content id="actions" select="px-table-row-actions"></content>
    </div>
  </template>
  <script>
    Polymer({
      is: 'px-table-row',
      // behaviors: [pxTableRowActionsSwipeBehavior],
      properties: {
        /**
        * The table-row object.
        */
        item: {
          type: Object,
          value: {}
        },
        /**
        * The title to set on the table-row.
        */
        title: {
          type: String
        },
        /**
        * The sub title to set on the table-row.
        */
        subtitle: {
          type: String
        },
        /**
        * The label to place on the right side of the item.
        */
        label1: {
          type: String
        },
        /**
        * The label to place on the left side of the item.
        */
        label2: {
          type: String
        },
        /**
        * The body to set on the table-row.
        */
        body: {
          type: String
        },
        /**
        * The image to set on the table-row.
        */
        image: {
          type: String
        },
        /**
        * The icon to set on the table-row.
        */
        icon: {
          type: String
        },
        /**
        * The left icon to set on the table-row.
        */
        iconLeft: {
          type: String
        },
        /**
        * The right icon to set on the table-row.
        */
        iconRight: {
          type: String
        },
        /**
        * The size to set on the table-row.
        */
        size: {
          type: String
        },
        /**
        * The media position (left or right);
        */
        mediaPos: {
          type: String
        },
        /**
         * The modifiers to apply to the table-row (tappable, info, nav-right, chevron)
         */
        modifier: {
          type: String
        },
        /**
        * If editMode is true then this item displays a delete icon.
        */
        editMode: {
          type: Boolean
        },
        /**
        * If orderMode is true then this item displays a order icon.
        */
        orderMode: {
          type: Boolean
        },
        /**
        * If actionable is true then this item responds to swipeleft/swiperight events.
        */
        actionable: {
          type: Boolean
        }
      },
      attached: function () {
        //  console.log(this.tagName, 'ready');
        var _this = this;
        this.async(function(){
          _this._init();
        });
      },
      created: function () {
        //  console.log(this.tagName, 'created');
      },
      detached: function () {
        //  console.log(this.tagName, 'attached');
      },
      _init: function () {
        var _this = this;

        if (_this.modifier) {
          var types = _this.modifier.split(' ');
          for (var i = 0; i < types.length; i++) {
            _this.toggleClass('table-row--' + types[i], true, _this.$$('.table-row'));
          }
        }
        if (_this.size) {
          _this.toggleClass('table-row--' + _this.size, true, _this.$$('.table-row'));
        }
        if (_this.actionable) {
          _this.toggleClass('table-row--actionable', true, _this.$$('.table-row'));
        }
        if (_this.iconPos) {
          _this.toggleClass('table-row__media--' + _this.iconPos, true, _this.$$('.table-row__media--icon'));
        }
        if (_this.imagePos) {
          _this.toggleClass('table-row__media--' + _this.imagePos, true, _this.$$('.table-row__media--image'));
        }
        if (_this.mediaPos) {
          _this.toggleClass('table-row__media--' + _this.mediaPos, true, _this.$$('.table-row__media'));
          if (_this.mediaPos === 'right') {
            _this.toggleClass('u-mr++', true, _this.$$('.table-row__media'));
          }
        }
        if (_this.item) {
          var item = _this.item;
          for (var prop in item) {
            _this[prop] = item[prop];
          }
        }
      },
      _handleRemoveItem: function (e) {
        e.preventDefault();
        this.fire('remove', e);
        this.remove();
        return false;
      },
      _handleReorderItem: function (e) {
        e.preventDefault();
        this.fire('reorder', e);
        return false;
      }
    });
  </script>
</dom-module>
